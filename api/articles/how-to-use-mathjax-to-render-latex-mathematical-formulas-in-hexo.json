{"title":"如何在Hexo中使用Mathjax渲染LaTeX数学公式","slug":"how-to-use-mathjax-to-render-latex-mathematical-formulas-in-hexo","date":"2017-09-06T01:19:34.000Z","updated":"2017-09-07T02:17:33.669Z","comments":true,"path":"api/articles/how-to-use-mathjax-to-render-latex-mathematical-formulas-in-hexo.json","excerpt":null,"covers":null,"content":"<!-- build time:Thu Sep 07 2017 10:24:15 GMT+0800 (中国标准时间) --><p>平时使用markdown写文档的时候，免不了会碰到数学公式，好在有强大的<a href=\"https://www.mathjax.org/\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">Mathjax</a>,可以解析数学公式。</p><p>基于Hexo搭建的个人博客，默认情况下渲染数学公式会出现各种各样的问题。</p><p>Hexo默认使用&quot;hexo-renderer-marked&quot;引擎渲染markdown，该引擎会把一些特殊的markdown符号转换为相应的html标签。</p><h2 id=\"解决方案\"><a class=\"markdownIt-Anchor\" href=\"#解决方案\"></a> 解决方案</h2><p>解决方案有很多，可以网上搜下，为了节省大家的时间，这里提供亲身测试过的方法。</p><p>更换Hexo的markdown渲染引擎，用<a href=\"https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">hexo-renderer-markdown-it-plus</a>引擎替换默认的渲染引擎<a href=\"https://github.com/hexojs/hexo-renderer-marked\" rel=\"external nofollow noopener noreferrer\" target=\"_blank\">hexo-renderer-marked</a>即可。</p><h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\"></a> 安装</h2><p>先卸载hexo-renderer-marked，再安装hexo-renderer-markdown-it-plus插件</p><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm uninstall hexo-renderer-marked --save</div><div class=\"line\">npm install hexo-renderer-markdown-it-plus --save</div></pre></td></tr></table></figure><h2 id=\"配置\"><a class=\"markdownIt-Anchor\" href=\"#配置\"></a> 配置</h2><p>安装插件后，如果未正常渲染LaTeX数学公式，在博客配置文件<code>_config.yml</code>中添加</p><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">markdown_it_plus:</div><div class=\"line\">  highlight: true</div><div class=\"line\">  html: true</div><div class=\"line\">  xhtmlOut: true</div><div class=\"line\">  breaks: true</div><div class=\"line\">  langPrefix:</div><div class=\"line\">  linkify: true</div><div class=\"line\">  typographer:</div><div class=\"line\">  quotes: “”‘’</div><div class=\"line\">  plugins:</div><div class=\"line\">    - plugin:</div><div class=\"line\">        name: markdown-it-katex</div><div class=\"line\">        enable: true</div><div class=\"line\">    - plugin:</div><div class=\"line\">        name: markdown-it-mark</div><div class=\"line\">        enable: false</div></pre></td></tr></table></figure><h2 id=\"文章启用mathjax\"><a class=\"markdownIt-Anchor\" href=\"#文章启用mathjax\"></a> 文章启用mathjax</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">title: Hello World</div><div class=\"line\">mathjax: true</div></pre></td></tr></table></figure><h2 id=\"加载css\"><a class=\"markdownIt-Anchor\" href=\"#加载css\"></a> 加载CSS</h2><p>最后在网页head部分加载mathjax样式表就搞定了</p><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;link href=&quot;https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css&quot; rel=&quot;stylesheet&quot;&gt;</div></pre></td></tr></table></figure><h2 id=\"举个栗子\"><a class=\"markdownIt-Anchor\" href=\"#举个栗子\"></a> 举个栗子</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">$$</div><div class=\"line\">H=-\\sum_&#123;i=1&#125;^N (\\sigma_&#123;i&#125;^x \\sigma_&#123;i+1&#125;^x+g \\sigma_&#123;i&#125;^z)</div><div class=\"line\">$$</div><div class=\"line\"></div><div class=\"line\">$$</div><div class=\"line\">f(n) = \\begin&#123;cases&#125;</div><div class=\"line\"> \\frac&#123;n&#125;&#123;2&#125;,</div><div class=\"line\"> &amp; \\text&#123;if &#125; n\\text&#123; is even&#125;</div><div class=\"line\"> \\\\ 3n+1, &amp; \\text&#123;if &#125; n\\text&#123; is odd&#125;</div><div class=\"line\"> \\end&#123;cases&#125;</div><div class=\"line\">$$</div></pre></td></tr></table></figure><p>上面的代码渲染后显示如下：</p><p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>H</mi><mo>=</mo><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo>(</mo><msubsup><mi>σ</mi><mrow><mi>i</mi></mrow><mi>x</mi></msubsup><msubsup><mi>σ</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><mi>x</mi></msubsup><mo>+</mo><mi>g</mi><msubsup><mi>σ</mi><mrow><mi>i</mi></mrow><mi>z</mi></msubsup><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">H=-\\sum_{i=1}^N (\\sigma_{i}^x \\sigma_{i+1}^x+g \\sigma_{i}^z)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:1.8283360000000002em\"></span><span class=\"strut bottom\" style=\"height:3.106005em;vertical-align:-1.277669em\"></span><span class=\"base displaystyle textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:.08125em\">H</span><span class=\"mrel\">=</span><span class=\"mord\">−</span><span class=\"mop op-limits\"><span class=\"vlist\"><span style=\"top:1.1776689999999999em;margin-left:0\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle cramped\"><span class=\"mord scriptstyle cramped\"><span class=\"mord mathit\">i</span><span class=\"mrel\">=</span><span class=\"mord mathrm\">1</span></span></span></span><span style=\"top:-.000005000000000143778em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span><span class=\"op-symbol large-op mop\">∑</span></span></span><span style=\"top:-1.2500050000000003em;margin-left:0\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:.10903em\">N</span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span>​</span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:.03588em\">σ</span><span class=\"vlist\"><span style=\"top:.247em;margin-left:-.03588em;margin-right:.05em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle cramped\"><span class=\"mord scriptstyle cramped\"><span class=\"mord mathit\">i</span></span></span></span><span style=\"top:-.4129999999999999em;margin-right:.05em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle uncramped\"><span class=\"mord mathit\">x</span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span>​</span></span></span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:.03588em\">σ</span><span class=\"vlist\"><span style=\"top:.24700000000000003em;margin-left:-.03588em;margin-right:.05em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle cramped\"><span class=\"mord scriptstyle cramped\"><span class=\"mord mathit\">i</span><span class=\"mbin\">+</span><span class=\"mord mathrm\">1</span></span></span></span><span style=\"top:-.41300000000000003em;margin-right:.05em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle uncramped\"><span class=\"mord mathit\">x</span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span>​</span></span></span><span class=\"mbin\">+</span><span class=\"mord mathit\" style=\"margin-right:.03588em\">g</span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:.03588em\">σ</span><span class=\"vlist\"><span style=\"top:.247em;margin-left:-.03588em;margin-right:.05em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle cramped\"><span class=\"mord scriptstyle cramped\"><span class=\"mord mathit\">i</span></span></span></span><span style=\"top:-.4129999999999999em;margin-right:.05em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle scriptstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:.04398em\">z</span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span>​</span></span></span><span class=\"mclose\">)</span></span></span></span></span></p><p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mrow><mo fence=\"true\">{</mo><mtable><mtr><mtd><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mn>2</mn></mrow></mfrac><mo separator=\"true\">,</mo></mrow></mtd><mtd><mrow><mtext><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">f</mi><mtext></mtext></mtext><mi>n</mi><mtext><mtext></mtext><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">s</mi><mtext></mtext><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">v</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">n</mi></mtext></mrow></mtd></mtr><mtr><mtd><mrow><mn>3</mn><mi>n</mi><mo>+</mo><mn>1</mn><mo separator=\"true\">,</mo></mrow></mtd><mtd><mrow><mtext><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">f</mi><mtext></mtext></mtext><mi>n</mi><mtext><mtext></mtext><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">s</mi><mtext></mtext><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi><mi mathvariant=\"normal\">d</mi></mtext></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">f(n) = \\begin{cases} \\frac{n}{2}, &amp; \\text{if } n\\text{ is even} \\\\ 3n+1, &amp; \\text{if } n\\text{ is odd} \\end{cases}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:1.86678em\"></span><span class=\"strut bottom\" style=\"height:3.2335599999999998em;vertical-align:-1.3667799999999999em\"></span><span class=\"base displaystyle textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:.10764em\">f</span><span class=\"mopen\">(</span><span class=\"mord mathit\">n</span><span class=\"mclose\">)</span><span class=\"mrel\">=</span><span class=\"minner displaystyle textstyle uncramped\"><span class=\"style-wrap reset-textstyle textstyle uncramped\" style=\"top:0\"><span class=\"delimsizing size4\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist\"><span style=\"top:-.75922em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"><span class=\"mord reset-textstyle displaystyle textstyle uncramped\"><span class=\"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist\"><span style=\"top:.686em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle textstyle cramped\"><span class=\"mord textstyle cramped\"><span class=\"mord mathrm\">2</span></span></span></span><span style=\"top:-.22999999999999998em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle textstyle uncramped frac-line\"></span></span><span style=\"top:-.677em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"reset-textstyle textstyle uncramped\"><span class=\"mord textstyle uncramped\"><span class=\"mord mathit\">n</span></span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span>​</span></span></span><span class=\"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter\"></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:.9347799999999998em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"><span class=\"mord mathrm\">3</span><span class=\"mord mathit\">n</span><span class=\"mbin\">+</span><span class=\"mord mathrm\">1</span><span class=\"mpunct\">,</span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span>​</span></span></span><span class=\"arraycolsep\" style=\"width:1em\"></span><span class=\"col-align-l\"><span class=\"vlist\"><span style=\"top:-.75922em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"><span class=\"text mord displaystyle textstyle uncramped\"><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\" style=\"margin-right:.07778em\">f</span><span class=\"mord mspace\"> </span></span><span class=\"mord mathit\">n</span><span class=\"text mord displaystyle textstyle uncramped\"><span class=\"mord mspace\"> </span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mspace\"> </span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\" style=\"margin-right:.01389em\">v</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">n</span></span></span></span><span style=\"top:.9347799999999998em\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"><span class=\"text mord displaystyle textstyle uncramped\"><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\" style=\"margin-right:.07778em\">f</span><span class=\"mord mspace\"> </span></span><span class=\"mord mathit\">n</span><span class=\"text mord displaystyle textstyle uncramped\"><span class=\"mord mspace\"> </span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mspace\"> </span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">d</span><span class=\"mord mathrm\">d</span></span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0\">​</span></span>​</span></span></span></span></span><span class=\"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter\"></span></span></span></span></span></span></p><!-- rebuild by neat -->","categories":[],"tags":[{"name":"Hexo","path":"api/tags/Hexo.json"}]}